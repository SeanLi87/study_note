# 	反射和注解

## java代码在计算机的三个阶段

1.Source源代码阶段--编译

2.class类对象阶段--classloader加载类到方法区内存

3.Runtime运行时阶段--对象声明后



class类对象：在classloader加载类到方法区时，JVM会使用java.lang.Class将类、接口进行实例化

## 反射：框架设计的灵魂

### 框架概念：

半成品软件，可以在框架的基础上进行软件开发，简化 编码

### 反射概念：

将类的各个组成部分分装为其他对象

*好处：

​	1.可以在程序运行过程中，操作这些对象。

​	2.可以解耦，提高程序的可扩展性。

### 获取class对象的方式

1.==Class.forName("全类名")==:	将字节码文件加载进内存，返回class对象

​	*多用于配置文件，将类名定义在配置文件中，读取文件，加载类，不需要导包

2.==类名.class==:	通过类名的属性class获取

​	*多用于参数传递，需要导包

3.==对象.getClass()==:	getClass()方法在object类中定义了。

​	*多用于对象的获取字节码的方式

结论：
				同一个字节码文件(*.class)	在一次程序运行过程中，只会被加载一次，不论通过哪一种方式获取的Class对象都是同一个。

### 反射框架

该框架可以实现在不改变任何框架代码的前提下，可以帮我们创建任意类的对象，并且执行其中任意方法。

*实现：

​	1.配置文件

​	2.反射

*步骤：

​	1.将需要创建的对象的全类名和需要执行的方法定义在配置文件中

​	2.在程序中加载读取配置文件

​	3.使用反射技术来加载类文件进内存

​	4.创建对象

​	5.执行方法



## 注解：

### 概念： 说明程序的。给计算机看的

### 注释：用文字描述程序的。给程序员看的



### 定义：

注解（Annotation），也叫元数据。一种代码级别的说明。它是JDK1.5及以后版本引入的一个特性，与类、接口、枚举是在同一个层次。它可以声明在包，类，字段，方法，局部变量，方法参数等的前面，用来对这些元素进行说明，注释。

### 概念描述：

​	*JDK1.5之后的特性

​	*说明程序的

​	*使用注解：@注解名称

### 作用分类：

​	1.编写文档：通过代码里标识的注解生成文档【生成doc文档】

​	2.代码分析：通过代码标识里的注解对代码进行分析【使用反射】

​	3.编译检查：通过代码里标识的注解让编译器能够实现基本的编译检查【比如override】



### JDK中预定义注解

### 自定义注解

格式：public @interface 注解名称{}

本质：注解本质上就是一个接口，该接口默认继承Annotation接口

​	*public interface MyAnno extends java.lang.annotation.Annotation{}

属性：接口中的抽象方法

​	*要求：

​		1.属性的返回值类型有：

​				*基本数据类型，String，枚举，注解，以上类型的数组

​		2.定义了属性，在使用时需要给属性赋值

​			1.如果定义属性时，使用default关键字给属性默认初始化值，则使用注解时，可以不进行属性的赋值。

​			2.如果只有一个属性需要赋值，并且属性的名称是value，使用时value可以省略，直接定义值即可

​			3.数组赋值时，值使用{}包裹。如果数组中只有一个值，则{}可以省略

### 在程序中使用注解