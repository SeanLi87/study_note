## java内存划分和数组内存

### JAVA内存概述

- **java的内存划分为5个部分**

1.栈（Stack）：存放的都是方法中的局部变量。方法运行是在栈当中

局部变量：方法的参数，或者是方法{}内部的变量

作用域：一旦超出作用域，立刻从栈内存中消失

2.堆（Heap）：凡是new出来的东西（数组，对象，及对象中的成员变量），都在堆当中

堆内存里都有一个地址值：16进制，比如直接打印数组名称会显示一个堆内存地址

堆内存里的数据都有默认值：

int则为0

float则为0.0

char则为unicode的不可见字符 \u0000

boolean则为false

引用类型则为null

3.方法区（Method Area）:存储.class数据

4.本地方法栈（Native Method Stack）:与操作系统相关

5.寄存器（pc Register）:与CPU相关



### 数组的内存图

1..class文件存放在方法区中（代表main方法存也在方法区中 ，包含方法名称，修饰符，参数，返回值等信息）

2.运行时，从方法区将main方法加载到栈内存，同时为方法开辟一个栈中的内存空间（叫进栈或者压栈）

3.方法中的局部变量都在栈内存中，可以是基本类型和引用类型。

针对数组来说，存储的只有名称和数组内存地址

针对基本类型，存储的就是值本身

针对String来说，存储的也是一个字符串对象的地址值，不同的是会分成堆内存中常量池对象的地址值和堆内存中对象的地址值

4.堆内存中存储了数组的元素，地址。在方法中的获取或者修改数组的值，都是通过地址找到数组在堆内存的位置，然后根据索引操作数组



一个数组的内存操作图

![截屏2020-08-13 上午10.14.29](/Users/xin.li/Documents/学习笔记/java学习笔记/java内存划分和数组内存.assets/截屏2020-08-13 上午10.14.29.png)

以下是两个数组引用相同地址得数组对象的内存操作

![截屏2020-08-13 上午10.19.45](/Users/xin.li/Documents/学习笔记/java学习笔记/java内存划分和数组内存.assets/截屏2020-08-13 上午10.19.45.png)



